(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(37),c=n.n(a),i=(n(43),n(2)),l=n.n(i),o=n(9),u=n(10),d=n(3),b=(n(45),n(0)),m=function(e){var t=e.app_url,n=e.handleCancel,r=e.handleSuccess,a=Object(s.useState)(),c=Object(d.a)(a,2),i=c[0],u=c[1],m=Object(s.useState)(),f=Object(d.a)(m,2),p=f[0],x=f[1],j=function(){var e=Object(o.a)(l.a.mark((function e(){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&i.trim()){e.next=3;break}return alert("Question tile cant be empty"),e.abrupt("return");case 3:if(p&&p.trim()){e.next=6;break}return alert("Question body cant be empty"),e.abrupt("return");case 6:return e.next=8,fetch("".concat(t,"/questions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,body:p})});case 8:if(200!==(n=e.sent).status){e.next=16;break}return e.next=12,n.json();case 12:s=e.sent,r(s.data),e.next=17;break;case 16:alert("Problem saving question");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(b.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(b.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(b.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(b.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(b.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[Object(b.jsx)("div",{className:"flex",children:Object(b.jsx)("h3",{className:"text-2xl",children:"Have a question? Ask away!"})}),Object(b.jsxs)("div",{className:"pt-2 flex-col",children:[Object(b.jsx)("div",{children:Object(b.jsx)("small",{children:"Question title"})}),Object(b.jsx)("input",{value:i,type:"text",className:"w-full pl-5 pr-5 pt-5 border border-purple-400 focus:border-purple-800 focus-within:border-purple-800 focus:ring-purple-700",onChange:function(e){return u(e.target.value)},placeholder:"Question title"}),Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsx)("small",{children:"Any more details?"})}),Object(b.jsx)("textarea",{value:p,cols:"30",rows:"10",className:"w-full pl-5 pr-5 pt-5 border border-purple-400 focus:border-purple-800 focus-within:border-purple-800 focus:ring-purple-700",onChange:function(e){return x(e.target.value)}})]})]}),Object(b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(b.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-600 text-base font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:j,children:"Ask"}),Object(b.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Cancel"})]})]})]})})},f=function(e){var t=e.data,n=e.answers,r=e.handleAnswerClick,a=e.fetchAnswers,c=Object(s.useState)(!1),i=Object(d.a)(c,2),u=i[0],m=i[1];return Object(b.jsxs)("div",{className:"flex ".concat(t.newly_added?"bg-yellow-100":""),children:[Object(b.jsx)("div",{className:"m-1 mr-2 relative flex justify-center items-center  bg-purple-200 text-purple-700 flex-none used",children:t.viewed}),Object(b.jsxs)("div",{className:"flex-col p-3 flex-auto",children:[Object(b.jsxs)("div",{className:"header flex",children:[Object(b.jsx)("h4",{className:"text-xl font-semibold",children:t.title}),Object(b.jsxs)("small",{className:"text-xs pt-2 ml-5",children:["(Created At: ",new Date(t.created_at).toLocaleDateString("en-US"),")"]})]}),Object(b.jsx)("div",{className:"text-sm",children:t.body}),Object(b.jsx)("div",{className:"flex ",children:Object(b.jsx)("button",{className:" text-green-600  font-semibold text-sm",onClick:Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=6;break}return e.next=3,a(t._id);case 3:m(!0),e.next=7;break;case 6:m(!1);case 7:case"end":return e.stop()}}),e)}))),children:u?"Hide answers":"Show answers"})}),u?Object(b.jsx)("div",{className:"answers",children:n.map((function(e){return Object(b.jsx)("div",{className:"p-5 ".concat(e.newly_added?"bg-yellow-100":""),children:e.content},e._id)}))}):null]}),Object(b.jsx)("div",{className:"flex-row-reverse p-5",children:Object(b.jsx)("button",{className:"bg-green-100 text-green-600  p-2 font-semibold text-sm",onClick:function(){return r(t)},children:"Answer it"})})]})},p=function(e){var t=e.app_url,n=e.handleCancel,r=e.handleSuccess,a=e.question,c=Object(s.useState)(),i=Object(d.a)(c,2),u=i[0],m=i[1],f=["yes","I don't know","no","that's fine"],p=function(){var e=Object(o.a)(l.a.mark((function e(){var n,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.trim()){e.next=3;break}return alert("Answer cant be empty"),e.abrupt("return");case 3:if(!(u.trim().length<10)){e.next=6;break}return alert("Answer cant be less than 10 characters"),e.abrupt("return");case 6:if((n=u.split(" ").find((function(e){return f.includes(e)})))||(n=u.split(",").find((function(e){return f.includes(e)}))),!n){e.next=11;break}return console.log("You cant use these stop words in your answer [yes ,I don't know, no, that's fine]"),e.abrupt("return");case 11:return e.next=13,fetch("".concat(t,"/questions/").concat(a._id,"/answers/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:u})});case 13:if(200!==(s=e.sent).status){e.next=21;break}return e.next=17,s.json();case 17:c=e.sent,r(c.data),e.next=22;break;case 21:alert("Problem submitting answers");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:Object(b.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(b.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(b.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(b.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(b.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[Object(b.jsx)("div",{className:"flex",children:Object(b.jsx)("h3",{className:"text-2xl",children:a.title})}),Object(b.jsxs)("div",{className:"pt-2 flex-col",children:[Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsx)("small",{children:"Add your answer here"})}),Object(b.jsx)("textarea",{value:u,cols:"30",rows:"10",className:"w-full pl-5 pr-5 pt-5 border border-purple-400 focus:border-purple-800 focus-within:border-purple-800 focus:ring-purple-700",onChange:function(e){return m(e.target.value)},placeholder:"Your answer"})]})]}),Object(b.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(b.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-600 text-base font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:p,children:"Submit"}),Object(b.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Cancel"})]})]})]})})},x=n(38),j=n.n(x);var h=function(){var e="https://qa-pickfu.herokuapp.com",t=Object(s.useState)(0),n=Object(d.a)(t,2),r=n[0],a=n[1],c=Object(s.useState)(!1),i=Object(d.a)(c,2),x=i[0],h=i[1],O=Object(s.useState)(!1),w=Object(d.a)(O,2),g=w[0],y=w[1],v=Object(s.useState)([]),N=Object(d.a)(v,2),k=N[0],_=N[1],S=Object(s.useState)([]),C=Object(d.a)(S,2),A=C[0],q=C[1],Q=Object(s.useState)(),J=Object(d.a)(Q,2),P=J[0],T=J[1],I=j()(e);Object(s.useEffect)((function(){D(),z()}),[]);var z=function(){I.connect(),I.emit("subscribe","new_questions"),I.emit("subscribe","new_answers"),I.on("new_questions",(function(e){console.log(e),e.newly_added=!0,_((function(t){return t.find((function(t){return t._id===e._id}))?t:[e].concat(Object(u.a)(t))}))})),I.on("new_answers",(function(e){console.log(e),A.find((function(t){return t._id===e._id}))||(e.newly_added=!0,q((function(t){return t.find((function(t){return t._id===e._id}))?t:[e].concat(Object(u.a)(t))})))}))},D=function(){var t=Object(o.a)(l.a.mark((function t(n){var s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e,n?"/questions/top":"/questions/all"));case 2:if(200!==(s=t.sent).status){t.next=9;break}return t.next=6,s.json();case 6:r=t.sent,console.log(r.data),_(r.data);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(o.a)(l.a.mark((function t(n){var s,r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e,"/questions/").concat(n,"/answers"));case 2:if(200!==(s=t.sent).status){t.next=9;break}return t.next=6,s.json();case 6:r=t.sent,a=A.filter((function(e){return e.question!==n})),q([].concat(Object(u.a)(r.data),Object(u.a)(a)));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(e){return"block relative px-4 py-1 leading-6 sm:text-md font-semibold focus:outline-none transition-colors duration-300 bg-white  mr-5 ".concat(r===e?"text-gray-900":" text-gray-400")};return Object(b.jsxs)("div",{className:"mx-auto bg-gray-50 container",children:[Object(b.jsx)("h1",{className:"text-7xl text-center font-bold pt-3 pb-3",children:" Simple QA"}),Object(b.jsxs)("div",{className:"flex mt-5 p-5",children:[Object(b.jsxs)("div",{className:"flex flex-auto",children:[Object(b.jsx)("button",{type:"button",className:H(0),onClick:function(){a(0),D()},children:"All Questions"}),Object(b.jsx)("button",{type:"button",className:H(1),onClick:function(){a(1),D("top")},children:"Latest 100 Questions "})]}),Object(b.jsx)("button",{type:"button",className:"flex-none px-4 py-1 leading-6 sm:text-md font-semibold focus:outline-none bg-purple-200 text-purple-700",onClick:function(){h(!0)},children:" Ask Question "})]}),Object(b.jsx)("div",{className:"flex-col",children:k.map((function(e){var t=A.filter((function(t){return t.question===e._id}));return Object(b.jsx)(f,{data:e,answers:t,handleAnswerClick:function(e){T(e),y(!0)},fetchAnswers:E},e._id)}))}),x?Object(b.jsx)(m,{handleCancel:function(){return h(!1)},app_url:e,handleSuccess:function(e){h(!1),e.newly_added=!0,_([e].concat(Object(u.a)(k)))}}):null,g?Object(b.jsx)(p,{handleCancel:function(){return y(!1)},app_url:e,handleSuccess:function(e){y(!1),T(null),e.newly_added=!0,q([e].concat(Object(u.a)(A)))},question:P}):null]})};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(h,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.f9e0bad7.chunk.js.map